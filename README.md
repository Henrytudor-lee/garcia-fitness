
# GarciaFit - ç§»åŠ¨ç«¯å¥èº«è®°å½•ä¸æŒ‡å¯¼åº”ç”¨

GarciaFit æ˜¯ä¸€æ¬¾é¢å‘ç§»åŠ¨ç«¯çš„ Web å¥èº«åŠ©æ‰‹åº”ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·è®°å½•æ—¥å¸¸å¥èº«è®­ç»ƒæ•°æ®ï¼Œå¹¶æä¾›æ ‡å‡†åŒ–çš„å¥èº«åŠ¨ä½œæ•™å­¦è§†é¢‘ã€‚è¯¥åº”ç”¨ä¸“æ³¨äºæ•°æ®å¯è§†åŒ–ã€è®­ç»ƒè·Ÿè¸ªå’Œå¥èº«æ•™è‚²çš„ç»“åˆï¼Œä½¿ç”¨ç°ä»£å‰ç«¯æŠ€æœ¯ä¸äº‘åŸç”Ÿæ¶æ„ï¼Œæä¾›è·¨å¹³å°ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ“ˆ ç”¨æˆ·è®­ç»ƒè®°å½•ç®¡ç†ï¼šè®°å½•æ¯æ¬¡è®­ç»ƒçš„åŠ¨ä½œã€ç»„æ•°ã€é‡é‡ã€æ¬¡æ•°ç­‰æ ¸å¿ƒæ•°æ®ã€‚
- ğŸ¥ æ•™å­¦è§†é¢‘æ”¯æŒï¼šä¸ºå¸¸è§å¥èº«åŠ¨ä½œæä¾›æ•™å­¦è§†é¢‘ï¼Œè¾…åŠ©ç”¨æˆ·æ ‡å‡†åŒ–è®­ç»ƒåŠ¨ä½œã€‚
- ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡ï¼šåŸºäº Ionic Frameworkï¼ŒåŸç”Ÿèˆ¬çš„ç§»åŠ¨ä½“éªŒã€‚
- ğŸ”’ å®‰å…¨è®¤è¯æœºåˆ¶ï¼šé‡‡ç”¨ JWT Token æœºåˆ¶è¿›è¡Œç™»å½•éªŒè¯ä¸ç”¨æˆ·ä¿¡æ¯éš”ç¦»ã€‚
- â˜ï¸ æ— æœåŠ¡å™¨æ¶æ„ï¼šä¾æ‰˜ Vercel Serverless Function å®ç°å¼¹æ€§åç«¯æ¥å£ã€‚
- ğŸ“Š æ•°æ®æŒä¹…åŒ–ï¼šSupabase æä¾› Postgres æ•°æ®åº“æ”¯æŒä¸å®æ—¶åŒæ­¥èƒ½åŠ›ã€‚

---

## ğŸ§± æŠ€æœ¯æ ˆæ¦‚è§ˆ

| æŠ€æœ¯        | è§’è‰²æè¿°                             |
|-------------|--------------------------------------|
| **Vite**    | æé€Ÿçš„å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…·             |
| **Vue 3**   | å“åº”å¼ç»„ä»¶å¼å‰ç«¯æ¡†æ¶                 |
| **TypeScript** | å¼ºç±»å‹æ”¯æŒï¼Œä¿éšœä»£ç å¯ç»´æŠ¤æ€§     |
| **Pinia**   | çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œæ›¿ä»£ Vuex              |
| **Ionic UI**| ç§»åŠ¨ç«¯ UI æ¡†æ¶ï¼Œæä¾›åŸç”Ÿä½“éªŒç»„ä»¶      |
| **Supabase**| BaaS å¹³å°ï¼šæ•°æ®åº“ã€èº«ä»½è®¤è¯ã€æ–‡ä»¶å­˜å‚¨ç­‰ |
| **Vercel**  | éƒ¨ç½² Serverless Function ä¸æ‰˜ç®¡å‰ç«¯    |
| **JWT**     | ç”¨æˆ·èº«ä»½è®¤è¯çš„æ ¸å¿ƒæœºåˆ¶               |

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```bash
â”œâ”€â”€ api/                      # Vercel Serverless Functions
â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”œâ”€â”€ database/                 # åˆ›å»ºå¿…è¦æ•°æ®åº“è„šæœ¬ã€å†…å«æ ·ä¾‹æ•°æ®
â”œâ”€â”€ lib/                      # åç«¯æœåŠ¡å™¨å·¥å…·å‡½æ•°
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/               # é¡¹ç›®èµ„æºï¼ˆå›¾æ ‡ã€å›¾ç‰‡ç­‰ï¼‰
â”‚   â”œâ”€â”€ components/           # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ layouts/              # é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ pages/                # ç‹¬ç«‹é¡µé¢
â”‚   â”œâ”€â”€ services/             # ç½‘ç»œè¯·æ±‚æœåŠ¡ & API æ¥å£
â”‚   â”œâ”€â”€ stores/               # Pinia çŠ¶æ€ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.vue               # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts               # å…¥å£æ–‡ä»¶
â”œâ”€â”€ supabase/                # Supabase SQL è„šæœ¬æˆ–é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â””â”€â”€ README.md
```

---

## ğŸ” èº«ä»½è®¤è¯æœºåˆ¶

æœ¬é¡¹ç›®é‡‡ç”¨ JWT Token å®ç°å‰åç«¯çš„æƒé™æ§åˆ¶ï¼š

- ä½¿ç”¨ Supabase Auth è¿›è¡Œç”¨æˆ·æ³¨å†Œ / ç™»å½•
- JWT å­˜å‚¨äº LocalStorage / Cookie ä¸­ï¼Œå¹¶åœ¨è¯·æ±‚å¤´ä¸­ä½œä¸º Bearer Token
- åç«¯ Serverless Function é€šè¿‡è§£æ JWT å®ç°ç”¨æˆ·èµ„æºæƒé™æ ¡éªŒ

---

## ğŸ§® æ•°æ®ç»“æ„è®¾è®¡ï¼ˆç®€è¦ï¼‰

ä»¥è®­ç»ƒè®°å½•ä¸ºä¾‹ï¼š

```sql
CREATE TABLE
  sessions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT (20) NOT NULL,
    start_time DATETIME NOT NULL,
    end_time DATETIME NOT NULL,
    is_done TINYINT (1) NOT NULL,
    status VARCHAR(255) NOT NULL,
    notes VARCHAR(255)
  );
```

Supabase æ•°æ®åº“é‡‡ç”¨ PostgreSQLï¼Œè¡¨ç»“æ„è®¾è®¡éµå¾ªèŒƒå¼ï¼Œæ”¯æŒ RLSï¼ˆRow Level Securityï¼‰ ä¿éšœç”¨æˆ·æ•°æ®éš”ç¦»ã€‚

---

## â˜ï¸ Serverless Function ç¤ºä¾‹

ä½äº `/api/` ç›®å½•çš„ API å¯åœ¨ Vercel Serverless ç¯å¢ƒä¸­è‡ªåŠ¨éƒ¨ç½²ï¼š

```ts
// api/session/start.ts
import { VercelRequest, VercelResponse } from "@vercel/node";
import dotenv from "dotenv";
import { verifyToken } from "../../lib/utils.js";
import { supabase } from "../../lib/supabase.js";

dotenv.config();

interface SessionData {
  user_id: number;
  end_time?: string;
  is_done?: boolean;
  status?: 'running' | 'paused' | 'finished';
  notes?: string;
}

export default async function handler(req: VercelRequest, res: VercelResponse) {
  if (req.method !== "POST") {
    return res.status(405).json({ error: "åªå…è®¸ POST è¯·æ±‚" });
  }

  const data: SessionData = req.body;

  if (!data.user_id) {
    return res.status(400).json({
      success: false,
      error: "user_id ä¸ºå¿…å¡«å­—æ®µ"
    });
  }
  //...
}
```

---

## ğŸ§ª æœ¬åœ°å¼€å‘ä¸è¿è¡Œ

1. å®‰è£…ä¾èµ–ï¼š

```bash
npm install
```

2. å¯åŠ¨å¼€å‘ç¯å¢ƒï¼š

```bash
vercel dev
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®å·²é€‚é… Vercel ä¸€é”®éƒ¨ç½²ï¼š

- å‰ç«¯éƒ¨ç½²è‡³ Vercelï¼ˆæ”¯æŒè‡ªåŠ¨ CI/CDï¼‰
- Serverless API è‡ªåŠ¨ç”Ÿæ•ˆ
- ç¯å¢ƒå˜é‡é€šè¿‡ Vercel Dashboard é…ç½®

---
